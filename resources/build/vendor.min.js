var jqCronDefaultSettings={texts:{},monthdays:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],hours:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],minutes:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],lang:"en",enabled_minute:!1,enabled_hour:!0,enabled_day:!0,enabled_week:!0,enabled_month:!0,enabled_year:!0,multiple_dom:!1,multiple_month:!1,multiple_mins:!1,multiple_dow:!1,multiple_time_hours:!1,multiple_time_minutes:!1,numeric_zero_pad:!1,default_period:"day",default_value:"",no_reset_button:!0,disabled:!1,bind_to:null,bind_method:{set:function(e,t){e.is(":input")?e.val(t):e.data("jqCronValue",t)},get:function(e){return e.is(":input")?e.val():e.data("jqCronValue")}}};(function(e){var t=function(n,r){for(var a in r)e.isPlainObject(r[a])?n[a]=t(n[a]&&e.isPlainObject(n[a])?n[a]:{},r[a]):e.isArray(r[a])?n[a]=r[a].slice(0):void 0!==r[a]&&(n[a]=r[a]);return n};this.jqCronMergeSettings=function(e){return t(t({},jqCronDefaultSettings),e||{})},e.fn.jqCronGetInstance=function(){return this.data("jqCron")},e.fn.jqCron=function(t){var n=t;return this.each(function(){var t,a,s=e(this),i=jqCronMergeSettings(n),o=i.texts[i.lang];if("object"!=typeof o||e.isEmptyObject(o))console&&console.error('Missing translations for language "'+i.lang+'". Please include jqCron.'+i.lang+".js or manually provide the necessary translations when calling $.fn.jqCron().");else{if(!i.jquery_container)if(s.is(":container"))i.jquery_element=s.uniqueId("jqCron");else{if(!s.is(":autoclose"))return void(console&&console.error(i.texts[i.lang].error1.replace("%s",this.tagName)));1==s.next(".jqCron").length&&s.next(".jqCron").remove(),i.jquery_element=e('<span class="jqCron"></span>').uniqueId("jqCron").insertAfter(s)}s.is(":input")&&(i.bind_to=i.bind_to||s),i.bind_to?(i.bind_to.is(":input")&&i.bind_to.blur(function(){var e=i.bind_method.get(i.bind_to);s.jqCronGetInstance().setCron(e)}),a=i.bind_method.get(i.bind_to),(t=new r(i)).setCron(a)):t=new r(i),e(this).data("jqCron",t)}})};var n=[];function r(t){var r,s,i,o,l,u,d,c=!1,h=this,m=this,f=e('<span class="jqCron-container"></span>'),p=e('<span class="jqCron-blocks"></span>'),g=e('<span class="jqCron-period"></span>'),_=e('<span class="jqCron-dom"></span>'),b=e('<span class="jqCron-month"></span>'),C=e('<span class="jqCron-mins"></span>'),y=e('<span class="jqCron-dow"></span>'),v=e('<span class="jqCron-time"></span>'),j=e('<span class="jqCron-cross">&#10008;</span>'),V=[];function q(e,r,i){var l=new a(h,e,r,i);return l.$.bind("selector:open",function(){for(var e=n.length;e--;)if(n[e]!=h)n[e].closeSelectors();else for(var t=V.length;t--;)V[t]!=l&&V[t].close()}),l.$.bind("selector:change",function(){var e=!1;c&&(t.multiple_mins==t.multiple_time_minutes&&(l==s?e=o.setValue(s.getValue()):l==o&&(e=s.setValue(o.getValue()))),e||f.trigger("cron:change",h.getCron()))}),V.push(l),l}this.disable=function(){f.addClass("disable"),t.disabled=!0,h.closeSelectors()},this.isDisabled=function(){return 1==t.disabled},this.enable=function(){f.removeClass("disable"),t.disabled=!1},this.getCron=function(){var e=r.getValue(),t=["*","*","*","*","*"];return"hour"==e&&(t[0]=s.getCronValue()),"day"!=e&&"week"!=e&&"month"!=e&&"year"!=e||(t[0]=o.getCronValue(),t[1]=i.getCronValue()),"month"!=e&&"year"!=e||(t[2]=u.getCronValue()),"year"==e&&(t[3]=d.getCronValue()),"week"==e&&(t[4]=l.getCronValue()),t.join(" ")},this.setCron=function(e){if(e)try{var t=(e=e.replace(/\s+/g," ").replace(/^ +/,"").replace(/ +$/,"")).replace(/\*\//g,"").replace(/[^\* ]/g,"-").replace(/-+/g,"-").replace(/ +/g,""),n=e.split(" ");5!=n.length&&h.error(h.getText("error2")),"*****"==t?r.setValue("minute"):"-****"==t?(r.setValue("hour"),s.setCronValue(n[0]),o.setCronValue(n[0])):"***"==t.substring(2,t.length)?(r.setValue("day"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1])):"-**"==t.substring(2,t.length)?(r.setValue("month"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),u.setCronValue(n[2])):"**-"==t.substring(2,t.length)?(r.setValue("week"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),l.setCronValue(n[4])):"-*"==t.substring(3,t.length)?(r.setValue("year"),s.setCronValue(n[0]),o.setCronValue(n[0]),i.setCronValue(n[1]),u.setCronValue(n[2]),d.setCronValue(n[3])):h.error(h.getText("error4")),h.clearError()}catch(e){}},this.closeSelectors=function(){for(var e=V.length;e--;)V[e].close()},this.getId=function(){return m.attr("id")},this.getText=function(e){var n=t.texts[t.lang][e]||null;return"string"==typeof n&&n.match("<b")&&(n='<span class="jqCron-text">'+(n=n.replace(/(<b *\/>)/gi,'</span><b /><span class="jqCron-text">'))+"</span>"),n},this.getHumanText=function(){var t=[];return f.find("> span > span:visible").find(".jqCron-text, .jqCron-selector > span").each(function(){var n=e(this).text().replace(/\s+$/g,"").replace(/^\s+/g,"");n&&t.push(n)}),t.join(" ").replace(/\s:\s/g,":")},this.getSettings=function(){return t},this.error=function(e){throw console&&console.error("[jqCron Error] "+e),f.addClass("jqCron-error").attr("title",e),e},this.clearError=function(){f.attr("title","").removeClass("jqCron-error")},this.clear=function(){u.setValue([]),l.setValue([]),s.setValue([]),d.setValue([]),i.setValue([]),o.setValue([]),h.triggerChange()},this.init=function(){var n,a;if(!c){"disable"in(t=jqCronMergeSettings(t))&&!t.disabled&&(t.disabled=t.disable),"hour_labels"in t||(t.hour_labels=t.hours.map(function(e){return String(e)})),"minute_labels"in t||(t.minute_labels=t.minutes.map(function(e){return String(e)})),"monthday_labels"in t||(t.monthday_labels=t.monthdays.map(function(e){return String(e)})),t.jquery_element||h.error(h.getText("error3")),(m=t.jquery_element).append(f),f.data("id",t.id),f.data("jqCron",h),f.append(p),t.no_reset_button||f.append(j),!t.disabled||f.addClass("disable"),p.append(g),/^(ko)$/i.test(t.lang)?p.append(b,_):p.append(_,b),p.append(C),p.append(y),p.append(v),j.click(function(){h.isDisabled()||h.clear()}),f.bind("cron:change",function(e,n){t.bind_to&&(t.bind_method.set&&t.bind_method.set(t.bind_to,n),h.clearError())}),g.append(h.getText("text_period")),r=q(g,!1,"period"),t.enabled_minute&&r.add("minute",h.getText("name_minute")),t.enabled_hour&&r.add("hour",h.getText("name_hour")),t.enabled_day&&r.add("day",h.getText("name_day")),t.enabled_week&&r.add("week",h.getText("name_week")),t.enabled_month&&r.add("month",h.getText("name_month")),t.enabled_year&&r.add("year",h.getText("name_year")),r.$.bind("selector:change",function(e,t){_.hide(),b.hide(),C.hide(),y.hide(),v.hide(),"hour"==t?C.show():"day"==t?v.show():"week"==t?(y.show(),v.show()):"month"==t?(_.show(),v.show()):"year"==t&&(_.show(),b.show(),v.show())}),r.setValue(t.default_period),C.append(h.getText("text_mins")),s=q(C,t.multiple_mins,"minutes");for(n=0,a=t.minutes;n<a.length;n++)s.add(a[n],a[n]);for(v.append(h.getText("text_time")),i=q(v,t.multiple_time_hours,"time_hours"),n=0,a=t.hours,labelsList=t.hour_labels;n<a.length;n++)i.add(a[n],labelsList[n]);for(o=q(v,t.multiple_time_minutes,"time_minutes"),n=0,a=t.minutes,labelsList=t.minute_labels;n<a.length;n++)o.add(a[n],labelsList[n]);for(y.append(h.getText("text_dow")),l=q(y,t.multiple_dow,"day_of_week"),n=0,a=h.getText("weekdays");n<a.length;n++)l.add(n+1,a[n]);for(_.append(h.getText("text_dom")),u=q(_,t.multiple_dom,"day_of_month"),n=0,a=t.monthdays,labelsList=t.monthday_labels;n<a.length;n++)u.add(a[n],labelsList[n]);for(b.append(h.getText("text_month")),d=q(b,t.multiple_month,"month"),n=0,a=h.getText("months");n<a.length;n++)d.add(n+1,a[n]);e("body").click(function(){var e,t=V.length;for(e=0;e<t;e++)V[e].close()}),c=!0,t.default_value&&h.setCron(t.default_value)}},this.triggerChange=function(){f.trigger("cron:change",h.getCron())},n.push(this),this.$=f;try{this.init(),h.triggerChange()}catch(e){}}function a(t,n,r,a){var s=this,i=e('<ul class="jqCron-selector-list"></ul>'),o=e('<span class="jqCron-selector-title"></span>'),l=e('<span class="jqCron-selector"></span>'),u={},d=[],c=!0,h=t.getSettings().numeric_zero_pad;this.getTotalItem=function(e){var t=0;switch(a){case"minutes":case"time_minutes":t=60-this.itemStartAt();break;case"time_hours":t=24-this.itemStartAt();break;case"day_of_month":t=31-this.itemStartAt();break;case"month":t=12-this.itemStartAt();break;case"day_of_week":t=7-this.itemStartAt()}if(e){for(var n=0,r=0;r<t;r++)r%e===0&&(n=r);return n/e+1}return t},this.itemStartAt=function(){switch(a){case"minutes":case"time_minutes":case"time_hours":return 0;case"day_of_month":case"month":case"day_of_week":return 1}},this.getValue=function(){return r?d:d[0]},this.getCronValue=function(){if(0==d.length)return"*";for(var e=[d[0]],t=d[0],n=d[0],r=d.length,a=1;a<r;a++)d[a]==n+1?(n=d[a],e[e.length-1]=t+"-"+n):(t=n=d[a],e.push(n));if(e.length>1){var i=0===e[0]?e[1]:e[0];if(this.getTotalItem(i)===e.length){var o=!0,l=0;for(a=1;a<e.length;a++)if(l+=i,e[a]%i!==0||i*a!==l){o=!1;break}if(o)return s.multipleOf=i,"*/"+i}}return e.join(",")},this.setCronValue=function(e){var t,n,r=[];if("*"!==e)for(;""!=e;)if((t=e.match(/^\*\/([0-9]+),?/))&&2==t.length){for(n=0;n<=59;n+=0|t[1])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+)\/([0-9]+),?/))&&4==t.length){for(n=0|t[1];n<=(0|t[2]);n+=0|t[3])r.push(n);e=e.replace(t[0],"")}else if((t=e.match(/^([0-9]+)-([0-9]+),?/))&&3==t.length){for(n=0|t[1];n<=(0|t[2]);n++)r.push(n);e=e.replace(t[0],"")}else{if(!(t=e.match(/^([0-9]+),?/))||2!=t.length)return;r.push(0|t[1]),e=e.replace(t[0],"")}s.setValue(r)},this.close=function(){l.trigger("selector:close")},this.open=function(){l.trigger("selector:open")},this.isOpened=function(){return i.is(":visible")},this.addValue=function(e){var t=r?d.slice(0):[];t.push(e),s.setValue(t)},this.removeValue=function(e){if(r){var t,n=[];for(t=0;t<d.length;t++)e!=[d[t]]&&n.push(d[t]);s.setValue(n)}else s.clear()},this.setValue=function(t){var n,a=[],s=d.join(" ");if(e.isArray(t)||(t=[t]),i.find("li").removeClass("selected"),t=function(e){for(var t=0,n=e.length,r={},a=[];t<n;)r[e[t]]||(r[e[t]]=a.push(e[t])),t++;return a}(t),t.sort(function(e,t){var n=typeof e;return n==typeof t&&"number"==n?e-t:String(e)==String(t)?0:String(e)<String(t)?-1:1}),r)for(n=0;n<t.length;n++)t[n]in u&&(u[t[n]].addClass("selected"),a.push(t[n]));else t[0]in u&&(u[t[0]].addClass("selected"),a.push(t[0]));return s!=(d=a).join(" ")&&(l.trigger("selector:change",r?t:t[0]),!0)},this.getTitleText=function(){var e=function(e){return e in u?u[e].text():e};if(0==d.length)return t.getText("empty_"+a)||t.getText("empty");var n,r=[e(d[0])],i=d[0],o=d[0],l=d.length;for(n=1;n<l;n++)d[n]==o+1?(o=d[n],r[r.length-1]=e(i)+"-"+e(o)):(i=o=d[n],r.push(e(o)));if(r.length>1){var c="0"===r[0]?+r[1]:+r[0],h=this.getTotalItem(c);if(console&&console.log(a,h,r.length,s.multipleOf),h===r.length){var m=!0,f=0;for(n=1;n<r.length;n++)if(f+=c,+r[n]%c!==0||c*n!==f){m=!1;break}if(m)return"every "+c}}return r.join(",")},this.clear=function(){u={},s.setValue([]),i.empty()},this.add=function(t,n){(n+"").match(/^[0-9]+$/)||(c=!1),h&&c&&n<10&&(n="0"+n);var a=e("<li>"+n+"</li>");i.append(a),u[t]=a;var o=0,l=null,d=this.getTotalItem(),m=this.itemStartAt();a.click(function(a){o++;var i=e(this);if(1===o)l=setTimeout(function(){r&&i.hasClass("selected")?s.removeValue(t):(s.addValue(t),r||s.close()),o=0},200);else if(r){for(var u=+n,c=[],h=m;h<d;h++)s.removeValue(h),h%u===0&&s.multipleOf!==u&&c.push(h);if(s.multipleOf!==u)for(s.multipleOf=u,h=0;h<c.length;h++)s.addValue(c[h]);else s.multipleOf=null;clearTimeout(l),o=0}}).dblclick(function(e){e.preventDefault()})},this.$=l,n.find("b:eq(0)").after(l).remove(),l.addClass("jqCron-selector-"+n.find(".jqCron-selector").length).append(o).append(i).bind("selector:open",function(){if(c){var e=1,t=i.find("li").length;t>5&&t<=16?e=2:t>16&&t<=23?e=3:t>23&&t<=40?e=4:t>40&&(e=5),i.addClass("cols"+e)}i.show()}).bind("selector:close",function(){i.hide()}).bind("selector:change",function(){o.html(s.getTitleText())}).click(function(e){e.stopPropagation()}).trigger("selector:change"),e.fn.disableSelection&&l.disableSelection(),o.click(function(e){s.isOpened()||t.isDisabled()?s.close():s.open()}),s.close(),s.clear()}this.jqCron=r,this.jqCronSelector=a;var s=0;e.fn.uniqueId=function(t){return this.each(function(){if(!e(this).attr("id")){var n=function(e){for(var t;;)if(t=(e||"JQUID")+""+ ++s,!document.getElementById(t))return t}(t);e(this).attr("id",n)}})},e.extend(e.expr[":"],{container:function(e){return(e.tagName+"").toLowerCase()in{a:1,abbr:1,acronym:1,address:1,b:1,big:1,blockquote:1,button:1,cite:1,code:1,dd:1,del:1,dfn:1,div:1,dt:1,em:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,ins:1,kbd:1,label:1,li:1,p:1,pre:1,q:1,samp:1,small:1,span:1,strong:1,sub:1,sup:1,td:1,tt:1}},autoclose:function(e){return(e.tagName+"").toLowerCase()in{area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,link:1,meta:1,param:1}}})}).call(this,jQuery),jqCronDefaultSettings.texts.en={empty:"every",empty_minutes:"every",empty_time_hours:"every hour",empty_time_minutes:"every minute",empty_day_of_week:"every day of the week",empty_day_of_month:"every day of the month",empty_month:"every month",name_minute:"minute",name_hour:"hour",name_day:"day",name_week:"week",name_month:"month",name_year:"year",text_period:"Every <b />",text_mins:" at <b /> minute(s) past the hour",text_time:" at <b />:<b />",text_dow:" on <b />",text_month:" of <b />",text_dom:" on <b />",error1:"The tag %s is not supported !",error2:"Bad number of elements",error3:"The jquery_element should be set into jqCron settings",error4:"Unrecognized expression",weekdays:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],months:["january","february","march","april","may","june","july","august","september","october","november","december"]};
